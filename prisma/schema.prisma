generator client {
  provider      = "prisma-client-js"
  binaryTargets = ["native", "linux-musl-openssl-3.0.x"]
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model Account {
  id                  String                @id @default(cuid())
  name                String
  createdAt           DateTime              @default(now())
  updatedAt           DateTime              @updatedAt
  features            Json?
  isDemo              Boolean               @default(false)
  status              TenantStatus          @default(TRIAL)
  tier                Tier                  @default(STARTER)
  trialEndsAt         DateTime?
  agents              Agent[]
  alerts              Alert[]
  apiKeys             ApiKey[]
  channelConnections  ChannelConnection[]
  clientConfigs       ClientConfig[]
  competitiveAnalyses CompetitiveAnalysis[]
  contacts            Contact[]
  corporateNumbers    CorporateNumber[]
  externalAccounts    ExternalAccount[]
  feedbacks           Feedback[]
  idempotencyKeys     IdempotencyKey[]
  inboxes             Inbox[]
  ingestionJobs       IngestionJob[]
  integrations        Integration[]
  knowledgeItems      KnowledgeItem[]
  leads               Lead[]
  media               Media[]
  refreshTokens       RefreshToken[]
  routingLogs         RoutingLog[]
  stories             Story[]
  subscription        Subscription?
  modules             TenantModule[]
  usageTracking       UsageTracking[]
  userAccounts        UserAccount[]

  @@index([createdAt])
  @@index([isDemo])
  @@index([tier])
  @@index([status])
  @@index([features], type: Gin)
  @@index([features], map: "idx_account_features", type: Gin)
}

model ExternalAccount {
  id         String   @id @default(cuid())
  accountId  String
  channel    Channel
  externalId String
  clientKey  String
  name       String?
  isActive   Boolean  @default(true)
  createdAt  DateTime @default(now())
  updatedAt  DateTime @updatedAt
  account    Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([accountId, channel, externalId], name: "accountId_channel_externalId")
  @@index([accountId])
  @@index([clientKey])
  @@index([channel])
}

model ChannelConnection {
  id                String                  @id @default(cuid())
  accountId         String
  channelType       Channel
  channelIdentifier String
  encryptedToken    String
  iv                String
  authTag           String
  metadata          Json?
  status            ChannelConnectionStatus @default(ACTIVE)
  lastSync          DateTime?
  lastError         String?
  createdAt         DateTime                @default(now())
  updatedAt         DateTime                @updatedAt
  account           Account                 @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([accountId, channelType, channelIdentifier])
  @@index([accountId])
  @@index([channelType])
  @@index([status])
}

model AuditLog {
  id        String   @id @default(cuid())
  userId    String?
  action    String
  metadata  Json?
  ipAddress String?
  userAgent String?
  createdAt DateTime @default(now())
  accountId String?

  @@index([userId])
  @@index([accountId])
  @@index([action])
  @@index([createdAt])
}

model Inbox {
  id            String         @id @default(cuid())
  accountId     String
  externalId    String
  name          String
  channel       Channel        @default(WHATSAPP)
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  contacts      Contact[]
  conversations Conversation[]
  account       Account        @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([accountId, externalId], name: "accountId_externalId")
  @@index([accountId])
  @@index([channel])
}

/// This model contains an expression index which requires additional setup for migrations. Visit https://pris.ly/d/expression-indexes for more info.
model Contact {
  id            String         @id @default(cuid())
  accountId     String
  inboxId       String
  phone         String
  name          String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  isCorporate   Boolean        @default(false)
  account       Account        @relation(fields: [accountId], references: [id], onDelete: Cascade)
  inbox         Inbox          @relation(fields: [inboxId], references: [id], onDelete: Cascade)
  conversations Conversation[]

  @@unique([inboxId, phone], name: "inboxId_phone")
  @@index([inboxId])
  @@index([accountId])
  @@index([isCorporate])
}

model Conversation {
  id                String                    @id @default(cuid())
  inboxId           String
  contactId         String
  channel           Channel                   @default(WHATSAPP)
  externalId        String?
  status            ConversationStatus        @default(OPEN)
  lastActivityAt    DateTime                  @default(now())
  createdAt         DateTime                  @default(now())
  updatedAt         DateTime                  @updatedAt
  messageCount      Int?                      @default(0)
  participantCount  Int?                      @default(0)
  unreadCount       Int?                      @default(0)
  contact           Contact                   @relation(fields: [contactId], references: [id], onDelete: Cascade)
  inbox             Inbox                     @relation(fields: [inboxId], references: [id], onDelete: Cascade)
  participants      ConversationParticipant[]
  messages          Message[]

  @@unique([channel, externalId], name: "conversation_channel_externalId_unique")
  @@index([inboxId])
  @@index([contactId])
  @@index([channel])
  @@index([externalId])
  @@index([lastActivityAt])
  @@index([status, lastActivityAt])
  @@index([inboxId, status, lastActivityAt(sort: Desc)])
}

model Message {
  id                                                 String                   @id @default(cuid())
  conversationId                                     String
  channel                                            Channel
  externalId                                         String?
  direction                                          MessageDirection
  from                                               String?
  to                                                 String?
  text                                               String?
  timestamp                                          DateTime                 @default(now())
  createdAt                                          DateTime                 @default(now())
  status                                             MessageStatus?           @default(SENT)
  deliveredAt                                        DateTime?
  readAt                                             DateTime?
  failedReason                                       String?
  editedAt                                           DateTime?
  originalText                                       String?
  deletedAt                                          DateTime?
  deletedBy                                          String?
  replyToMessageId                                   String?
  version                                            Int                      @default(1)
  search_vector                                      Unsupported("tsvector")?
  conversation                                       Conversation             @relation(fields: [conversationId], references: [id], onDelete: Cascade)
  replyToMessage                                     Message?                 @relation("MessageReplies", fields: [replyToMessageId], references: [id], onUpdate: NoAction)
  replies                                            Message[]                @relation("MessageReplies")

  @@unique([channel, externalId], name: "message_channel_externalId_unique")
  @@index([conversationId])
  @@index([externalId])
  @@index([channel])
  @@index([timestamp])
  @@index([conversationId, createdAt])
  @@index([conversationId, timestamp(sort: Desc), direction])
  @@index([status])
  @@index([replyToMessageId])
  @@index([search_vector], type: Gin)
  @@index([search_vector], map: "idx_message_search", type: Gin)
}

model ConversationParticipant {
  id                String       @id @default(cuid())
  conversationId    String
  userAccountId     String
  lastReadMessageId String?
  lastReadAt        DateTime?
  unreadCount       Int          @default(0)
  joinedAt          DateTime     @default(now())
  leftAt            DateTime?
  muted             Boolean      @default(false)
  mutedUntil        DateTime?
  createdAt         DateTime     @default(now())
  updatedAt         DateTime     @default(now()) @updatedAt
  conversation      Conversation @relation(fields: [conversationId], references: [id], onDelete: Cascade, onUpdate: NoAction)
  userAccount       UserAccount  @relation(fields: [userAccountId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@unique([conversationId, userAccountId])
  @@index([conversationId])
  @@index([userAccountId])
  @@index([userAccountId, unreadCount])
}

model Presence {
  id                     String      @id @default(cuid())
  userAccountId          String      @unique
  status                 String      @default("offline")
  lastSeenAt             DateTime    @default(now())
  currentConversationId  String?
  isTypingInConversation String?
  socketId               String?
  deviceInfo             Json?
  createdAt              DateTime    @default(now())
  updatedAt              DateTime    @default(now()) @updatedAt
  userAccount            UserAccount @relation(fields: [userAccountId], references: [id], onDelete: Cascade, onUpdate: NoAction)

  @@index([userAccountId])
  @@index([status])
  @@index([lastSeenAt])
}

model ClientConfig {
  id               String       @id @default(cuid())
  accountId        String
  clientKey        String
  status           ClientStatus @default(ACTIVE)
  name             String?
  defaultAgentKey  String       @default("master-router")
  allowedAgents    Json
  channels         Json
  externalAccounts Json
  n8nOverrides     Json?
  createdAt        DateTime     @default(now())
  updatedAt        DateTime     @updatedAt
  account          Account      @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@unique([accountId, clientKey], name: "accountId_clientKey")
  @@index([accountId])
  @@index([status])
  @@index([allowedAgents], type: Gin)
  @@index([channels], type: Gin)
  @@index([channels], map: "idx_client_config_channels", type: Gin)
}

model RoutingLog {
  id                String        @id @default(cuid())
  accountId         String
  requestId         String        @unique
  clientKey         String
  agentKey          String?
  channel           Channel?
  externalAccountId String?
  conversationId    String?
  status            RoutingStatus @default(RECEIVED)
  latencyMs         Int?
  error             String?
  source            String?
  createdAt         DateTime      @default(now())
  updatedAt         DateTime      @updatedAt
  account           Account       @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([clientKey])
  @@index([status])
  @@index([createdAt])
  @@index([clientKey, createdAt])
  @@index([status, createdAt])
}

model UserAccount {
  id            String                    @id @default(cuid())
  accountId     String
  email         String?
  passwordHash  String?
  name          String
  phone         String?
  role          UserRole                  @default(USER)
  status        AccountStatus             @default(ACTIVE)
  avatarUrl     String?
  notes         String?
  createdAt     DateTime                  @default(now())
  updatedAt     DateTime                  @updatedAt
  username      String
  participants  ConversationParticipant[]
  presence      Presence?
  refreshTokens RefreshToken[]
  account       Account                   @relation(fields: [accountId], references: [id], onDelete: Cascade)
  preferences   UserPreference?

  @@unique([accountId, username], name: "accountId_username")
  @@index([accountId])
  @@index([username])
  @@index([role])
  @@index([status])
}

model UserPreference {
  id            String      @id @default(cuid())
  userAccountId String      @unique
  theme         Theme       @default(DEFAULT)
  language      Language    @default(EN)
  timezone      String      @default("UTC")
  dateFormat    String      @default("YYYY-MM-DD")
  timeFormat    String      @default("24h")
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  userAccount   UserAccount @relation(fields: [userAccountId], references: [id], onDelete: Cascade)
}

model MagicLink {
  id        String   @id @default(cuid())
  email     String
  token     String   @unique
  used      Boolean  @default(false)
  expiresAt DateTime
  createdAt DateTime @default(now())

  @@index([email])
  @@index([token])
}

model RefreshToken {
  id            String      @id @default(cuid())
  token         String      @unique
  userAccountId String
  accountId     String
  ipAddress     String?
  userAgent     String?
  deviceInfo    Json?
  expiresAt     DateTime
  revokedAt     DateTime?
  revokedReason String?
  lastUsedAt    DateTime    @default(now())
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  account       Account     @relation(fields: [accountId], references: [id], onDelete: Cascade)
  userAccount   UserAccount @relation(fields: [userAccountId], references: [id], onDelete: Cascade)

  @@index([userAccountId])
  @@index([accountId])
  @@index([token])
  @@index([expiresAt])
  @@index([revokedAt])
}

model IdempotencyKey {
  id           String   @id @default(cuid())
  key          String   @unique
  accountId    String
  endpoint     String
  method       String
  requestBody  Json?
  statusCode   Int?
  responseBody Json?
  createdAt    DateTime @default(now())
  expiresAt    DateTime
  account      Account  @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([key])
  @@index([expiresAt])
  @@index([statusCode])
}

model Lead {
  id          String      @id @default(cuid())
  accountId   String
  name        String
  company     String?
  email       String?
  phone       String?
  status      LeadStatus  @default(NEW)
  temperature Temperature @default(WARM)
  channel     String
  assignedTo  String?
  tags        String[]
  notes       String?
  value       Float?
  currency    String?
  createdAt   DateTime    @default(now())
  updatedAt   DateTime    @updatedAt
  account     Account     @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([status])
  @@index([temperature])
  @@index([assignedTo])
  @@index([createdAt])
  @@index([accountId, status])
}

model Feedback {
  id            String         @id @default(cuid())
  accountId     String
  customerName  String
  customerEmail String?
  customerPhone String?
  type          FeedbackType   @default(GENERAL)
  status        FeedbackStatus @default(PENDING)
  rating        Int?
  message       String
  response      String?
  respondedAt   DateTime?
  respondedBy   String?
  channel       String?
  createdAt     DateTime       @default(now())
  updatedAt     DateTime       @updatedAt
  account       Account        @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([status])
  @@index([type])
  @@index([rating])
  @@index([createdAt])
}

model Alert {
  id             String        @id @default(cuid())
  accountId      String
  type           AlertType
  title          String
  subtitle       String?
  status         AlertStatus   @default(OPEN)
  priority       AlertPriority @default(MEDIUM)
  amount         Float?
  currency       String?
  customerName   String?
  channel        Channel?
  conversationId String?
  assignee       String?
  resolvedAt     DateTime?
  resolvedBy     String?
  createdAt      DateTime      @default(now())
  updatedAt      DateTime      @updatedAt
  account        Account       @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([status])
  @@index([type])
  @@index([priority])
  @@index([assignee])
  @@index([createdAt])
  @@index([accountId, status])
}

model TenantModule {
  id        String   @id @default(cuid())
  tenantId  String
  moduleKey String
  enabled   Boolean  @default(true)
  limits    Json?
  createdAt DateTime @default(now())
  updatedAt DateTime @updatedAt
  tenant    Account  @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@unique([tenantId, moduleKey])
  @@index([tenantId])
  @@index([moduleKey])
}

model Integration {
  id              String              @id @default(cuid())
  tenantId        String
  provider        IntegrationProvider
  status          IntegrationStatus   @default(PENDING)
  credentials     String?
  config          Json?
  lastHealthCheck DateTime?
  healthStatus    String?
  errorMessage    String?
  createdAt       DateTime            @default(now())
  updatedAt       DateTime            @updatedAt
  tenant          Account             @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@unique([tenantId, provider])
  @@index([tenantId])
  @@index([provider])
  @@index([status])
}

model CorporateNumber {
  id             String   @id @default(cuid())
  tenantId       String
  phone          String
  company        String?
  department     String?
  notes          String?
  autoRespond    Boolean  @default(false)
  alertOnContact Boolean  @default(true)
  createdAt      DateTime @default(now())
  updatedAt      DateTime @updatedAt
  tenant         Account  @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@unique([tenantId, phone])
  @@index([tenantId])
  @@index([phone])
}

model Subscription {
  id                   String    @id @default(cuid())
  tenantId             String    @unique
  stripeCustomerId     String?   @unique
  stripeSubscriptionId String?   @unique
  stripePriceId        String?
  tier                 Tier      @default(STARTER)
  status               String    @default("trialing")
  currentPeriodStart   DateTime?
  currentPeriodEnd     DateTime?
  cancelAtPeriodEnd    Boolean   @default(false)
  createdAt            DateTime  @default(now())
  updatedAt            DateTime  @updatedAt
  tenant               Account   @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([tenantId])
  @@index([stripeCustomerId])
  @@index([status])
}

model UsageTracking {
  id        String   @id @default(cuid())
  tenantId  String
  metric    String
  value     Int
  period    String
  createdAt DateTime @default(now())
  tenant    Account  @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@unique([tenantId, metric, period])
  @@index([tenantId])
  @@index([metric])
  @@index([period])
}

model Media {
  id           String    @id @default(cuid())
  tenantId     String
  fileUrl      String
  fileName     String
  type         MediaType
  mimeType     String?
  size         Int?
  source       String?
  sourceId     String?
  thumbnailUrl String?
  createdAt    DateTime  @default(now())
  updatedAt    DateTime  @updatedAt
  tenant       Account   @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([tenantId])
  @@index([type])
  @@index([source])
  @@index([sourceId])
}

model IngestionJob {
  id             String             @id @default(cuid())
  tenantId       String
  status         IngestionJobStatus @default(PENDING)
  type           String
  source         String?
  progress       Int                @default(0)
  itemsProcessed Int                @default(0)
  itemsTotal     Int                @default(0)
  errorMessage   String?
  metadata       Json?
  startedAt      DateTime?
  completedAt    DateTime?
  createdAt      DateTime           @default(now())
  updatedAt      DateTime           @updatedAt
  tenant         Account            @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([tenantId])
  @@index([status])
  @@index([type])
  @@index([createdAt])
}

model KnowledgeItem {
  id        String        @id @default(cuid())
  tenantId  String
  type      KnowledgeType @default(CUSTOM)
  title     String
  content   String
  tags      String[]
  metadata  Json?
  sourceUrl String?
  embedding String?
  createdAt DateTime      @default(now())
  updatedAt DateTime      @updatedAt
  tenant    Account       @relation(fields: [tenantId], references: [id], onDelete: Cascade)

  @@index([tenantId])
  @@index([type])
  @@index([tags])
  @@index([createdAt])
}

model Agent {
  id             String      @id @default(cuid())
  accountId      String
  agentName      String
  agentType      AgentType
  status         AgentStatus @default(INACTIVE)
  n8nWorkflowId  String?
  templatePath   String
  configJson     Json?
  executionCount Int         @default(0)
  errorCount     Int         @default(0)
  lastExecutedAt DateTime?
  createdAt      DateTime    @default(now())
  deployedAt     DateTime?
  updatedAt      DateTime    @updatedAt
  account        Account     @relation(fields: [accountId], references: [id], onDelete: Cascade)
  logs           AgentLog[]

  @@index([accountId])
  @@index([status])
  @@index([agentType])
  @@index([accountId, status])
}

model AgentLog {
  id               String          @id @default(cuid())
  agentId          String
  accountId        String
  executionStatus  ExecutionStatus
  inputMessage     String?
  outputMessage    String?
  processingTimeMs Int
  openaiTokensUsed Int?
  openaiCostUsd    Decimal?        @db.Decimal(10, 6)
  errorMessage     String?
  timestamp        DateTime        @default(now())
  agent            Agent           @relation(fields: [agentId], references: [id], onDelete: Cascade)

  @@index([agentId])
  @@index([accountId])
  @@index([timestamp])
  @@index([executionStatus])
  @@index([agentId, timestamp])
  @@index([accountId, timestamp])
}

model ApiKey {
  id         String    @id @default(cuid())
  accountId  String
  name       String
  key        String    @unique
  lastUsedAt DateTime?
  expiresAt  DateTime?
  isActive   Boolean   @default(true)
  createdAt  DateTime  @default(now())
  updatedAt  DateTime  @updatedAt
  account    Account   @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([key])
  @@index([isActive])
  @@index([accountId, isActive])
}

model Story {
  id            String      @id @default(cuid())
  accountId     String
  mediaUrl      String
  mediaType     String
  caption       String?
  link          String?
  status        StoryStatus @default(DRAFT)
  scheduledAt   DateTime?
  publishedAt   DateTime?
  expiresAt     DateTime?
  externalId    String?
  phoneNumberId String
  viewCount     Int         @default(0)
  clickCount    Int         @default(0)
  errorMessage  String?
  createdAt     DateTime    @default(now())
  updatedAt     DateTime    @updatedAt
  account       Account     @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([status])
  @@index([scheduledAt])
  @@index([accountId, status])
}

model CompetitiveAnalysis {
  id               String         @id @default(cuid())
  accountId        String
  businessNiche    String
  businessName     String?
  location         String?
  latitude         Decimal?       @db.Decimal(10, 7)
  longitude        Decimal?       @db.Decimal(10, 7)
  radiusKm         Int?
  status           AnalysisStatus @default(PROCESSING)
  depth            String         @default("STANDARD")
  competitors      Json
  totalFound       Int            @default(0)
  seoInsights      Json?
  rankings         Json?
  recommendations  Json?
  processingTimeMs Int?
  errorMessage     String?
  createdAt        DateTime       @default(now())
  updatedAt        DateTime       @updatedAt
  account          Account        @relation(fields: [accountId], references: [id], onDelete: Cascade)

  @@index([accountId])
  @@index([status])
  @@index([businessNiche])
  @@index([accountId, status])
  @@index([createdAt])
}

enum ConversationStatus {
  OPEN
  PENDING
  CLOSED
}

enum Channel {
  WHATSAPP
  INSTAGRAM
  FACEBOOK
  EMAIL
  WEB
}

enum MessageDirection {
  IN
  OUT
}

enum MessageStatus {
  SENDING
  SENT
  DELIVERED
  READ
  FAILED
}

enum ClientStatus {
  ACTIVE
  SUSPENDED
}

enum RoutingStatus {
  RECEIVED
  FORWARDED
  FAILED
}

enum UserRole {
  ADMIN
  USER
  SUPER_ADMIN
  CLIENT_ADMIN
  AGENT_USER
}

enum AccountStatus {
  ACTIVE
  SUSPENDED
  PENDING
}

enum TenantStatus {
  TRIAL
  ACTIVE
  SUSPENDED
  CANCELLED
}

enum Tier {
  STARTER
  PRO
  ENTERPRISE
}

enum Theme {
  LIGHT
  DARK
  SYSTEM
  DEFAULT
  NORD
  GOLD
  NATURE
  NETFLIX
  LARACON
  DRACULA
}

enum Language {
  EN
  FR
  ES
  PT
}

enum LeadStatus {
  NEW
  CONTACTED
  QUALIFIED
  LOST
  WON
}

enum Temperature {
  HOT
  WARM
  COLD
}

enum FeedbackType {
  COMPLAINT
  SUGGESTION
  PRAISE
  QUESTION
  GENERAL
}

enum FeedbackStatus {
  PENDING
  IN_PROGRESS
  RESOLVED
  CLOSED
}

enum AlertType {
  PAYMENT
  HANDOFF
  SYSTEM
  CUSTOM
  CORPORATE
}

enum AlertStatus {
  OPEN
  PENDING
  RESOLVED
}

enum AlertPriority {
  HIGH
  MEDIUM
  LOW
}

enum ChannelConnectionStatus {
  ACTIVE
  INACTIVE
  ERROR
  PENDING
}

enum IntegrationProvider {
  SHOPIFY
  WHATSAPP
  AIRTABLE
  STRIPE
  CUSTOM
}

enum IntegrationStatus {
  PENDING
  ACTIVE
  ERROR
  DISABLED
}

enum MediaType {
  IMAGE
  VIDEO
  AUDIO
  DOCUMENT
  OTHER
}

enum IngestionJobStatus {
  PENDING
  RUNNING
  COMPLETED
  FAILED
}

enum KnowledgeType {
  PRODUCT
  FAQ
  POLICY
  CUSTOM
}

enum AgentType {
  SALES
  SUPPORT
  ANALYTICS
  HR
  FINANCE
  LEGAL
  CONTENT
  MARKETPLACE
  DEVOPS
  OPERATIONS
  INTERNAL
  INTELLIGENCE
}

enum AgentStatus {
  ACTIVE
  INACTIVE
  DEPLOYING
  ERROR
  SUSPENDED
}

enum ExecutionStatus {
  SUCCESS
  ERROR
  TIMEOUT
  CANCELLED
}

enum AnalysisStatus {
  PROCESSING
  COMPLETED
  FAILED
  CANCELLED
}

enum StoryStatus {
  DRAFT
  SCHEDULED
  PUBLISHING
  PUBLISHED
  FAILED
  EXPIRED
}
